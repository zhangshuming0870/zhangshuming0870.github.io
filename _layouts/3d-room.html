---
layout: default
---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>{{ page.title | default: "3Dæˆ¿é—´" }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            text-align: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 300;
        }
        
        .controls-info {
            position: fixed;
            top: 80px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            font-size: 14px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .controls-info h3 {
            margin: 0 0 10px 0;
            color: #ffd700;
        }
        
        .controls-info ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .controls-info li {
            margin: 5px 0;
        }
        
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            z-index: 1001;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .footer {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            z-index: 1000;
            font-size: 12px;
            backdrop-filter: blur(10px);
        }
        
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            z-index: 1000;
            text-decoration: none;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: translateY(-2px);
        }
    </style>
</head>

<body>
    <a href="/" class="back-link">â† è¿”å›é¦–é¡µ</a>
    
    <div class="header">
        <h1>{{ page.title | default: "ğŸ  éŸ©å›½çŸ­å‰§ã€Šé—¹é’Ÿã€‹é£æ ¼æˆ¿é—´ - 3Då±•ç¤º" }}</h1>
    </div>

    <div class="controls-info">
        <h3>ğŸ® æ§åˆ¶è¯´æ˜</h3>
        <ul>
            <li>ğŸ–±ï¸ é¼ æ ‡å·¦é”®ï¼šæ—‹è½¬è§†è§’</li>
            <li>ğŸ” é¼ æ ‡æ»šè½®ï¼šç¼©æ”¾</li>
            <li>ğŸ“± é¼ æ ‡å³é”®ï¼šå¹³ç§»</li>
            <li>ğŸ”„ è‡ªåŠ¨æ—‹è½¬ï¼šæŒ‰ç©ºæ ¼é”®</li>
        </ul>
    </div>

    <div class="loading" id="loading">
        ğŸš€ æ­£åœ¨åŠ è½½3Dæˆ¿é—´...
    </div>

    <div class="footer">
        <p>ğŸ¬ çµæ„Ÿæ¥æºï¼šéŸ©å›½çŸ­å‰§ã€Šé—¹é’Ÿã€‹ | æŠ€æœ¯ï¼šThree.js 3Dæ¸²æŸ“</p>
    </div>

    {{ content }}

    <script>
        // åŠ¨æ€åŠ è½½Three.jsåº“
        function loadThreeJS() {
            return new Promise((resolve, reject) => {
                if (typeof THREE !== 'undefined') {
                    resolve();
                    return;
                }
                
                console.log('æ­£åœ¨åŠ¨æ€åŠ è½½Three.jsåº“...');
                
                const threeScript = document.createElement('script');
                threeScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/three.js/0.178.0/three.min.js';
                
                threeScript.onload = function() {
                    console.log('Three.jsåŠ è½½æˆåŠŸ');
                    resolve();
                };
                
                threeScript.onerror = function() {
                    console.error('Three.jsåŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨CDN');
                    const backupScript = document.createElement('script');
                    backupScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/three.js/0.178.0/three.min.js';
                    
                    backupScript.onload = function() {
                        console.log('å¤‡ç”¨CDNåŠ è½½æˆåŠŸ');
                        resolve();
                    };
                    
                    backupScript.onerror = function() {
                        reject(new Error('æ‰€æœ‰CDNéƒ½åŠ è½½å¤±è´¥'));
                    };
                    
                    document.head.appendChild(backupScript);
                };
                
                document.head.appendChild(threeScript);
            });
        }
        
        // åŠ¨æ€åŠ è½½OrbitControls
        function loadOrbitControls() {
            return new Promise((resolve) => {
                if (typeof THREE.OrbitControls !== 'undefined') {
                    resolve();
                    return;
                }
                
                const orbitScript = document.createElement('script');
                orbitScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/three.js/0.178.0/OrbitControls.js';
                
                orbitScript.onload = function() {
                    console.log('OrbitControlsåŠ è½½æˆåŠŸ');
                    resolve();
                };
                
                orbitScript.onerror = function() {
                    console.warn('OrbitControlsåŠ è½½å¤±è´¥ï¼Œå°†ä½¿ç”¨åŸºç¡€æ§åˆ¶');
                    resolve();
                };
                
                document.head.appendChild(orbitScript);
            });
        }
        
        // 3Dæˆ¿é—´åœºæ™¯ä»£ç 
        let scene, camera, renderer, controls;
        
        // åˆå§‹åŒ–åœºæ™¯
        function init() {
            // åˆ›å»ºåœºæ™¯
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf0f0f0);
            
            // åˆ›å»ºç›¸æœº
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(5, 3, 5);
            
            // åˆ›å»ºæ¸²æŸ“å™¨
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.body.appendChild(renderer.domElement);
            
            // æ·»åŠ è½¨é“æ§åˆ¶å™¨
            if (typeof THREE.OrbitControls !== 'undefined') {
                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.05;
                controls.autoRotate = false;
                controls.autoRotateSpeed = 1.0;
            }
            
            // åˆ›å»ºæˆ¿é—´
            createRoom();
            
            // åˆ›å»ºå…‰ç…§
            createLighting();
            
            // å¼€å§‹åŠ¨ç”»å¾ªç¯
            animate();
            
            // éšè—åŠ è½½æç¤º
            const loading = document.getElementById('loading');
            if (loading) {
                loading.style.opacity = '0';
                loading.style.transition = 'opacity 0.5s';
                setTimeout(() => {
                    loading.style.display = 'none';
                }, 500);
            }
        }
        
        // åˆ›å»ºæˆ¿é—´ç»“æ„
        function createRoom() {
            // åœ°æ¿
            const floorGeometry = new THREE.PlaneGeometry(8, 6);
            const floorMaterial = new THREE.MeshLambertMaterial({ color: 0x8b4513 });
            const floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.rotation.x = -Math.PI / 2;
            floor.receiveShadow = true;
            scene.add(floor);
            
            // å¢™å£
            const wallGeometry = new THREE.PlaneGeometry(8, 3);
            const wallMaterial = new THREE.MeshLambertMaterial({ color: 0xf5f5f5 });
            
            // åå¢™
            const backWall = new THREE.Mesh(wallGeometry, wallMaterial);
            backWall.position.set(0, 1.5, -3);
            scene.add(backWall);
            
            // å·¦å¢™
            const leftWallGeometry = new THREE.PlaneGeometry(6, 3);
            const leftWall = new THREE.Mesh(leftWallGeometry, wallMaterial);
            leftWall.position.set(-4, 1.5, 0);
            leftWall.rotation.y = Math.PI / 2;
            scene.add(leftWall);
            
            // å³å¢™
            const rightWall = new THREE.Mesh(wallGeometry, wallMaterial);
            rightWall.position.set(0, 1.5, 3);
            rightWall.rotation.y = Math.PI;
            scene.add(rightWall);
            
            // åºŠ
            const bedGeometry = new THREE.BoxGeometry(2.5, 0.3, 1.8);
            const bedMaterial = new THREE.MeshLambertMaterial({ color: 0x8b4513 });
            const bed = new THREE.Mesh(bedGeometry, bedMaterial);
            bed.position.set(-2, 0.15, -1.5);
            bed.castShadow = true;
            scene.add(bed);
            
            // ä¹¦æ¡Œ
            const deskGeometry = new THREE.BoxGeometry(2, 0.05, 1);
            const deskMaterial = new THREE.MeshLambertMaterial({ color: 0x8b4513 });
            const desk = new THREE.Mesh(deskGeometry, deskMaterial);
            desk.position.set(2, 0.75, -1.5);
            desk.castShadow = true;
            scene.add(desk);
            
            // æ¤…å­
            const chairGeometry = new THREE.BoxGeometry(0.5, 0.8, 0.5);
            const chairMaterial = new THREE.MeshLambertMaterial({ color: 0x8b4513 });
            const chair = new THREE.Mesh(chairGeometry, chairMaterial);
            chair.position.set(2, 0.4, -0.5);
            chair.castShadow = true;
            scene.add(chair);
        }
        
        // åˆ›å»ºå…‰ç…§
        function createLighting() {
            // ç¯å¢ƒå…‰
            const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
            scene.add(ambientLight);
            
            // æ–¹å‘å…‰
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 5, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
        }
        
        // åŠ¨ç”»å¾ªç¯
        function animate() {
            requestAnimationFrame(animate);
            
            if (controls) {
                controls.update();
            }
            
            renderer.render(scene, camera);
        }
        
        // çª—å£å¤§å°è°ƒæ•´
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        // äº‹ä»¶ç›‘å¬
        window.addEventListener('resize', onWindowResize, false);
        
        // æ·»åŠ é”®ç›˜æ§åˆ¶
        document.addEventListener('keydown', function(event) {
            if (event.code === 'Space') {
                event.preventDefault();
                if (controls) {
                    controls.autoRotate = !controls.autoRotate;
                }
            }
        });
        
        // ä¸»å‡½æ•°ï¼šåŠ è½½åº“å¹¶åˆå§‹åŒ–åœºæ™¯
        async function main() {
            try {
                await loadThreeJS();
                await loadOrbitControls();
                init();
            } catch (error) {
                console.error('åŠ è½½å¤±è´¥:', error);
                document.getElementById('loading').innerHTML = 'âŒ åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹
        window.addEventListener('load', main);
    </script>
</body>
</html> 