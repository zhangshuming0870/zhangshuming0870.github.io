---
layout: post
title: "nginx常见问题"
date: 2022-06-12
categories: [其他]
tags: [nginx,常见问题]
author: zhangshuming
---

# nginx常见问题

## 目录

1. [Windows](#windows)
2. [Ubuntu](#ubuntu)
3. [CentOS](#centos)
3. [问题汇总](#问题汇总)

---

## Windows

### 查看nginx安装位置
```bash
# 查看nginx进程
tasklist /fi "imagename eq nginx.exe"

# 查看nginx安装目录（通常在）
where nginx.exe
```

### 查看配置文件位置
```bash
# 默认配置文件位置
C:\nginx\conf\nginx.conf

# 查看配置文件内容
type C:\nginx\conf\nginx.conf
```

### 查看html目录位置
```bash
# 默认html目录位置
C:\nginx\html

# 查看目录内容
dir C:\nginx\html
```

### 启动nginx
```bash
# 进入nginx目录
cd C:\nginx

# 启动nginx
start nginx.exe

# 或者直接启动
C:\nginx\nginx.exe
```

### 停止nginx
```bash
# 优雅停止
nginx.exe -s quit

# 强制停止
nginx.exe -s stop

# 或者使用taskkill
taskkill /f /im nginx.exe
```

### 重启nginx
```bash
# 重新加载配置文件
nginx.exe -s reload

# 或者先停止再启动
nginx.exe -s quit
start nginx.exe
```

### 检查配置文件语法
```bash
nginx.exe -t
```

---

## Ubuntu

### 查看nginx安装位置
```bash
# 查看nginx可执行文件位置
which nginx

# 查看nginx进程
ps aux | grep nginx

# 查看nginx版本
nginx -v
```

### 查看配置文件位置
```bash
# 查看主配置文件位置
nginx -t

# 默认配置文件位置
/etc/nginx/nginx.conf

# 查看配置文件内容
cat /etc/nginx/nginx.conf

# 查看所有配置文件
find /etc/nginx -name "*.conf"
```

### 查看html目录位置
```bash
# 默认html目录位置
/var/www/html

# 查看目录内容
ls -la /var/www/html

# 查看nginx配置中的root目录
grep -r "root" /etc/nginx/sites-available/
```

### 启动nginx
```bash
# 使用systemctl启动
sudo systemctl start nginx

# 或者使用service命令
sudo service nginx start

# 直接启动nginx
sudo nginx
```

### 停止nginx
```bash
# 使用systemctl停止
sudo systemctl stop nginx

# 或者使用service命令
sudo service nginx stop

# 优雅停止
sudo nginx -s quit

# 强制停止
sudo nginx -s stop
```

### 重启nginx
```bash
# 使用systemctl重启
sudo systemctl restart nginx

# 或者使用service命令
sudo service nginx restart

# 重新加载配置文件
sudo nginx -s reload

# 或者使用systemctl重新加载
sudo systemctl reload nginx
```

### 检查nginx状态
```bash
# 查看nginx服务状态
sudo systemctl status nginx

# 检查配置文件语法
sudo nginx -t
```

---

## CentOS

### 查看nginx安装位置
```bash
# 查看nginx可执行文件位置
which nginx

# 查看nginx进程
ps aux | grep nginx

# 查看nginx版本
nginx -v

# 查看nginx安装包信息
rpm -qa | grep nginx
```

### 查看配置文件位置
```bash
# 查看主配置文件位置
nginx -t

# 默认配置文件位置
/etc/nginx/nginx.conf

# 查看配置文件内容
cat /etc/nginx/nginx.conf

# 查看所有配置文件
find /etc/nginx -name "*.conf"
```

### 查看html目录位置
```bash
# 默认html目录位置
/usr/share/nginx/html

# 查看目录内容
ls -la /usr/share/nginx/html

# 查看nginx配置中的root目录
grep -r "root" /etc/nginx/conf.d/
```

### 启动nginx
```bash
# 使用systemctl启动
sudo systemctl start nginx

# 或者使用service命令
sudo service nginx start

# 直接启动nginx
sudo nginx

# 设置开机自启
sudo systemctl enable nginx
```

### 停止nginx
```bash
# 使用systemctl停止
sudo systemctl stop nginx

# 或者使用service命令
sudo service nginx stop

# 优雅停止
sudo nginx -s quit

# 强制停止
sudo nginx -s stop
```

### 重启nginx
```bash
# 使用systemctl重启
sudo systemctl restart nginx

# 或者使用service命令
sudo service nginx restart

# 重新加载配置文件
sudo nginx -s reload

# 或者使用systemctl重新加载
sudo systemctl reload nginx
```

### 检查nginx状态
```bash
# 查看nginx服务状态
sudo systemctl status nginx

# 检查配置文件语法
sudo nginx -t

# 查看nginx端口监听
netstat -tlnp | grep nginx
```

---

## 通用命令

### 查看nginx进程
```bash
# 查看所有nginx进程
ps aux | grep nginx

# 查看nginx主进程和工作进程
ps -ef | grep nginx
```

### 查看nginx端口
```bash
# 查看nginx监听的端口
netstat -tlnp | grep nginx

# 或者使用ss命令
ss -tlnp | grep nginx
```

### 查看nginx日志
```bash
# 查看访问日志
tail -f /var/log/nginx/access.log

# 查看错误日志
tail -f /var/log/nginx/error.log

# 查看nginx日志位置
grep -r "log" /etc/nginx/nginx.conf
```

### 测试nginx配置
```bash
# 测试配置文件语法
nginx -t

# 测试配置文件并显示详细信息
nginx -T
```



## 问题汇总

### ubuntu安装nginx一直出现无法找到配置文件的问题

![nginx配置截图](/assets/nginx/Snipaste_2025-07-28_09-41-19.png)

*nginx配置相关截图*

#### 解决

```
sudo apt remove --purge nginx nginx-common
sudo apt autoremove
sudo apt update
sudo apt install nginx
```





